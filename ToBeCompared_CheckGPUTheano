{
  "paragraphs": [
    {
      "text": "#ToBeCompared\nimport os\nos.environ[\"KERAS_BACKEND\"] \u003d \"theano\"\n#os.environ[\u0027THEANO_FLAGS\u0027] \u003d \u0027floatX\u003dfloat32,device\u003dcuda\u0027\nos.environ[\u0027THEANO_FLAGS\u0027] \u003d \u0027floatX\u003dfloat32,device\u003dcuda,dnn.library_path\u003d/usr/local/cuda/lib64,dnn.include_path\u003d/usr/local/cuda/include/,dnn.enabled\u003dTrue,cuda.root\u003d/usr/local\u0027\nfrom theano import function, config, shared, tensor\nimport numpy\nimport time\nvlen \u003d 10 * 30 * 768  # 10 x #cores x # threads per core\niters \u003d 1000\n\nrng \u003d numpy.random.RandomState(22)\nx \u003d shared(numpy.asarray(rng.rand(vlen), config.floatX))\nf \u003d function([], tensor.exp(x))\nprint(f.maker.fgraph.toposort())\nt0 \u003d time.time()\nfor i in range(iters):\n    r \u003d f()\nt1 \u003d time.time()\nprint(\"Looping %d times took %f seconds\" % (iters, t1 - t0))\nprint(\"Result is %s\" % (r,))\nif numpy.any([isinstance(x.op, tensor.Elemwise) and\n              (\u0027Gpu\u0027 not in type(x.op).__name__)\n              for x in f.maker.fgraph.toposort()]):\n    print(\u0027False\u0027)\nelse:\n    print(\u0027True\u0027)",
      "dateUpdated": "Apr 11, 2018 6:22:14 AM",
      "config": {
        "colWidth": 12.0,
        "graph": {
          "mode": "table",
          "height": 300.0,
          "optionOpen": false,
          "keys": [],
          "values": [],
          "groups": [],
          "scatter": {}
        },
        "enabled": true,
        "editorMode": "ace/mode/scala"
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "paragraphProgress": {
        "jobs": [],
        "numCompletedTasks": 0,
        "numTasks": 0,
        "truncated": false
      },
      "version": "v0",
      "jobName": "paragraph_1520856402732_179810980",
      "id": "20180312-120642_669605594_q_KUAVEZYR5Y1523880016",
      "result": {
        "code": "SUCCESS",
        "type": "TEXT",
        "msg": "Using cuDNN version 7005 on context None\nMapped name None to device cuda: Tesla K80 (0000:00:1E.0)\n[GpuElemwise{exp,no_inplace}(\u003cGpuArrayType\u003cNone\u003e(float32, vector)\u003e), HostFromGpu(gpuarray)(GpuElemwise{exp,no_inplace}.0)]\nLooping 1000 times took 0.212332 seconds\nResult is [1.2317803 1.6187935 1.5227807 ... 2.2077181 2.2996776 1.623233 ]\nTrue\n"
      },
      "dateCreated": "Mar 12, 2018 12:06:42 PM",
      "dateSubmitted": "Apr 16, 2018 12:07:27 PM",
      "dateStarted": "Apr 16, 2018 12:08:43 PM",
      "dateFinished": "Apr 16, 2018 12:13:46 PM",
      "status": "FINISHED",
      "progressUpdateIntervalMs": 500
    },
    {
      "title": "Checking GPU for Theano",
      "text": "%sh\nfunction getResultsForPara() {\n    para_id\u003d$1\n    note_name\u003d\u0027ToBeCompare_CheckGPUTheano\u0027\n    python \u003c\u003c END\nimport subprocess\nimport json\na \u003d subprocess.check_output(\"grep -r $note_name /usr/lib/zeppelin/notebook/\", shell\u003d True, stderr\u003dsubprocess.STDOUT)\nb \u003d a.split(\":\")[0]\n\na \u003d open(b, \u0027r\u0027)\nb \u003d json.load(a)\nc \u003d b[\u0027paragraphs\u0027][$para_id][\u0027result\u0027][\u0027msg\u0027]\nif \u0027GPU\u0027 in c:\n    print(True)\nelse:\n    print(False)\nEND\n}\ngetResultsForPara 0",
      "dateUpdated": "Apr 11, 2018 6:23:17 AM",
      "config": {
        "colWidth": 12.0,
        "graph": {
          "mode": "table",
          "height": 300.0,
          "optionOpen": false,
          "keys": [],
          "values": [],
          "groups": [],
          "scatter": {}
        },
        "enabled": true,
        "editorMode": "ace/mode/sh",
        "title": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "version": "v0",
      "jobName": "paragraph_1520856509622_953461108",
      "id": "20180312-120829_405084188_q_KUAVEZYR5Y1523880016",
      "result": {
        "code": "SUCCESS",
        "type": "TEXT",
        "msg": "True\n"
      },
      "dateCreated": "Mar 12, 2018 12:08:29 PM",
      "dateSubmitted": "Apr 16, 2018 12:07:27 PM",
      "dateStarted": "Apr 16, 2018 12:07:45 PM",
      "dateFinished": "Apr 16, 2018 12:07:46 PM",
      "status": "FINISHED",
      "progressUpdateIntervalMs": 500
    },
    {
      "text": "",
      "config": {},
      "settings": {
        "params": {},
        "forms": {}
      },
      "version": "v0",
      "jobName": "paragraph_1520934345530_2012742492",
      "id": "20180313-094545_1449338141_q_KUAVEZYR5Y1523880016",
      "result": {
        "code": "SUCCESS",
        "type": "TEXT",
        "msg": ""
      },
      "dateCreated": "Mar 13, 2018 9:45:45 AM",
      "dateSubmitted": "Apr 16, 2018 12:08:43 PM",
      "dateStarted": "Apr 16, 2018 12:13:47 PM",
      "dateFinished": "Apr 16, 2018 12:13:47 PM",
      "status": "FINISHED",
      "progressUpdateIntervalMs": 500
    }
  ],
  "name": "ToBeCompared_CheckGPUTheano",
  "id": "KUAVEZYR5Y1523880016",
  "angularObjects": {
    "2DAQ2TF7P286211523880264629:shared_process": [],
    "2DCGE2E47286211523880264709:shared_process": [],
    "2DB4WYK5B286211523880421452:shared_process": [],
    "2DCJ1ZNR5286211523880264697:shared_process": [],
    "2DCQZ5V1D286211523880264706:shared_process": []
  },
  "config": {
    "isDashboard": false
  },
  "info": {},
  "source": "FCN"
}